# SwiftCast 개발 현황

## 프로젝트 개요

**SwiftCast**: Claude Code의 AI Provider를 스위칭하고 사용량을 모니터링하는 데스크톱 앱

**개발 배경**: Claude Code 사용량이 많아 토큰 한도에 자주 도달 → GLM을 백업 Provider로 도입 → 매번 수동 설정 변경이 번거로움 → 자동화 도구 개발

**기술 스택**:
- Backend: Rust (Tauri 2.x, axum, SQLite)
- Frontend: React + TypeScript + TailwindCSS
- i18n: react-i18next
- 빌드 크기: ~10MB

---

## v0.2.0 릴리스 (2026-01-20)

**GitHub Release**: https://github.com/devload/swiftcast/releases/tag/v0.2.0

### 완료된 미션

#### 미션 1: 다국어 지원 (i18n) ✅
| 항목 | 상태 | 설명 |
|------|------|------|
| 한국어 | ✅ | 기본 언어 |
| English | ✅ | 완료 |
| 日本語 | ✅ | 완료 |
| 中文 | ✅ | 완료 |
| 언어 선택 UI | ✅ | 설정에서 변경 가능 |
| 자동 감지 | ✅ | 브라우저 언어 감지 |

**관련 파일**:
- `src/i18n.ts` - i18n 설정
- `src/locales/{ko,en,ja,zh}.json` - 번역 파일
- `src/components/Settings.tsx` - 언어 선택 드롭다운

---

#### 미션 2: 시스템 트레이 ✅
| 항목 | 상태 | 설명 |
|------|------|------|
| 트레이 아이콘 | ✅ | 상태표시줄에 표시 |
| 트레이 메뉴 | ✅ | 열기 / 종료 |
| 창 닫기 동작 | ✅ | 숨기기 (종료하지 않음) |
| 아이콘 클릭 | ✅ | 메뉴 표시 |

**관련 파일**:
- `src-tauri/src/main.rs` - 트레이 설정
- `src-tauri/Cargo.toml` - `tray-icon` feature
- `src-tauri/tauri.conf.json` - trayIcon 설정

---

#### 미션 3: Windows 빌드 ✅
| 항목 | 상태 | 설명 |
|------|------|------|
| Windows x64 | ✅ | GNU 툴체인 (MinGW) |
| EXE 설치 파일 | ✅ | NSIS 인스톨러 |
| MSI 인스톨러 | ✅ | Windows Installer |
| 경로 호환성 | ✅ | `%USERPROFILE%\.claude\settings.json` |

**관련 파일**:
- `src-tauri/src/commands/mod.rs` - `get_home_dir()`, `get_claude_settings_path()`
- `.github/workflows/build.yml`

---

#### 미션 4: GitHub Actions CI/CD ✅
| 항목 | 상태 | 설명 |
|------|------|------|
| macOS Apple Silicon | ✅ | aarch64-apple-darwin |
| macOS Intel | ✅ | x86_64-apple-darwin |
| Windows x64 | ✅ | x86_64-pc-windows-gnu |
| 자동 릴리스 | ✅ | 태그 푸시 시 Draft 생성 |

**워크플로우**: `.github/workflows/build.yml`

---

### v0.2.0 다운로드

| 플랫폼 | 파일 |
|--------|------|
| macOS (Apple Silicon) | `SwiftCast_0.1.0_aarch64.dmg` |
| macOS (Intel) | `SwiftCast_0.1.0_x64.dmg` |
| Windows | `SwiftCast_0.1.0_x64-setup.exe` |
| Windows (MSI) | `SwiftCast_0.1.0_x64_en-US.msi` |

---

## v0.1.0 릴리스 (2026-01-20)

**GitHub Release**: https://github.com/devload/swiftcast/releases/tag/v0.1.0

### 완료된 미션

#### 미션 1: 세션별 사용량 추적 ✅
| 항목 | 상태 | 설명 |
|------|------|------|
| 세션 ID 추출 | ✅ | `sentry-trace` 헤더에서 trace_id 추출 |
| DB 스키마 | ✅ | `session_id` 컬럼 추가 |
| 세션별 통계 | ✅ | 쿼리 및 UI 탭 구현 |

---

#### 미션 2: Claude Code 설정 자동 관리 ✅
| 항목 | 상태 | 설명 |
|------|------|------|
| 앱 시작 시 | ✅ | settings.json 자동 생성 |
| 계정 전환 시 | ✅ | settings.json 자동 업데이트 |
| 프록시 중지 시 | ✅ | settings.json 삭제 |

---

#### 미션 3: 모든 계정 프록시 경유 ✅
| 변경 전 | 변경 후 |
|---------|---------|
| Anthropic: 직접 연결 | 모든 계정: 프록시 경유 |
| GLM: 프록시 경유 | → 통합 사용량 추적 |

---

#### 미션 4: UI/UX 개선 ✅
- 툴팁 컴포넌트
- 토큰 설명 추가
- Select 스타일 통일

---

#### 미션 5: 문서화 ✅
- 스크린샷 4개
- README.md 전면 개편

---

#### 미션 6: 로고 디자인 ✅
- 보라색 그라데이션
- 양방향 화살표 (스위칭 컨셉)

---

## 핵심 기능 요약

### 1. Provider 스위칭
```
계정 목록에서 "활성화" 클릭 → Claude Code 재시작 → 새 Provider 사용
```

### 2. 사용량 모니터링
| 탭 | 내용 |
|-----|------|
| 개요 | 요청 수, 입력/출력 토큰, 총 토큰 |
| 모델별 | claude-sonnet-4 등 모델별 사용량 |
| 일별 | 최근 7일 일별 사용량 |
| 세션별 | Claude Code 세션(대화)별 사용량 |
| 최근 로그 | 개별 API 요청 기록 |

### 3. 자동화
- 프록시 자동 시작
- `~/.claude/settings.json` 자동 관리
- macOS Keychain에서 인증 정보 자동 스캔
- 시스템 트레이에서 백그라운드 실행

---

## 작동 원리

```
Claude Code
    ↓ (HTTP 요청)
SwiftCast Proxy (localhost:32080)
    ↓ (활성 계정 확인)
    ├─→ Anthropic API (OAuth 토큰 패스스루)
    └─→ GLM API (저장된 API 키 주입)
    ↓ (사용량 기록)
Claude Code
```

---

## 플랫폼별 경로

| 항목 | macOS | Windows |
|------|-------|---------|
| Claude 설정 | `~/.claude/settings.json` | `%USERPROFILE%\.claude\settings.json` |
| 앱 데이터 | `~/.config/com.swiftcast.desktop/` | `%APPDATA%\com.swiftcast.desktop\` |
| DB 파일 | `~/.config/com.swiftcast.desktop/data.db` | `%APPDATA%\com.swiftcast.desktop\data.db` |

---

## 디렉토리 구조

```
swiftcast/
├── src/                        # Frontend (React)
│   ├── components/
│   │   ├── Dashboard.tsx       # 메인 대시보드
│   │   ├── AccountManager.tsx  # 계정 관리
│   │   ├── UsageMonitor.tsx    # 사용량 모니터링
│   │   └── Settings.tsx        # 설정 + 언어 선택
│   ├── locales/                # 번역 파일
│   │   ├── ko.json
│   │   ├── en.json
│   │   ├── ja.json
│   │   └── zh.json
│   ├── i18n.ts                 # i18n 설정
│   └── App.tsx
│
├── src-tauri/                  # Backend (Rust)
│   ├── src/
│   │   ├── proxy/server.rs     # 프록시 서버
│   │   ├── storage/database.rs # SQLite DB
│   │   ├── commands/mod.rs     # Tauri commands
│   │   └── main.rs             # 트레이 아이콘 설정
│   ├── icons/                  # 앱 아이콘
│   └── Cargo.toml
│
├── .github/workflows/          # CI/CD
│   └── build.yml               # 멀티플랫폼 빌드
│
├── docs/                       # 스크린샷
├── README.md                   # 사용자 가이드
└── 개발현황.md                  # 이 문서
```

---

## 빠른 시작

### 설치
```bash
# macOS / Windows - 릴리스 페이지에서 다운로드
https://github.com/devload/swiftcast/releases/latest
```

### 개발
```bash
# 의존성 설치
npm install

# 개발 모드
npm run tauri dev

# 빌드
npm run tauri build
```

### 릴리스 (태그 푸시)
```bash
git tag v0.x.0
git push origin v0.x.0
# → GitHub Actions가 자동으로 빌드 & Draft 릴리스 생성
```

---

## 향후 계획

### v0.3.0 예정
| 기능 | 우선순위 | 비고 |
|------|----------|------|
| Linux 빌드 | 중 | Ubuntu/Debian |
| 더 많은 Provider 지원 | 낮음 | OpenAI, Gemini 등 |
| 사용량 차트/그래프 | 낮음 | 시각화 개선 |
| 자동 업데이트 | 낮음 | tauri-plugin-updater |

---

## 결론

**v0.2.0 상태**: 멀티플랫폼 지원 완료

**해결한 문제**:
- ✅ 토큰 한도 도달 시 GLM으로 즉시 전환
- ✅ 수동 설정 파일 편집 불필요
- ✅ Provider별 사용량 통합 추적
- ✅ Windows/macOS 모두 지원
- ✅ 다국어 UI (한/영/일/중)
- ✅ 시스템 트레이 백그라운드 실행
