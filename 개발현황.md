# SwiftCast 개발 현황

## 프로젝트 개요

**SwiftCast**: Claude Code의 AI Provider를 스위칭하고 사용량을 모니터링하는 데스크톱 앱

**개발 배경**: Claude Code 사용량이 많아 토큰 한도에 자주 도달 → GLM을 백업 Provider로 도입 → 매번 수동 설정 변경이 번거로움 → 자동화 도구 개발

**기술 스택**:
- Backend: Rust (Tauri 2.x, axum, SQLite)
- Frontend: React + TypeScript + TailwindCSS
- 빌드 크기: ~10MB

---

## v0.1.0 릴리스 (2026-01-20)

**GitHub Release**: https://github.com/devload/swiftcast/releases/tag/v0.1.0

### 완료된 미션

#### 미션 1: 세션별 사용량 추적 ✅
| 항목 | 상태 | 설명 |
|------|------|------|
| 세션 ID 추출 | ✅ | `sentry-trace` 헤더에서 trace_id 추출 |
| DB 스키마 | ✅ | `session_id` 컬럼 추가 |
| 세션별 통계 | ✅ | 쿼리 및 UI 탭 구현 |

**관련 파일**:
- `src-tauri/src/proxy/server.rs:177-190`
- `src-tauri/src/storage/database.rs:396-417`
- `src/components/UsageMonitor.tsx`

---

#### 미션 2: Claude Code 설정 자동 관리 ✅
| 항목 | 상태 | 설명 |
|------|------|------|
| 앱 시작 시 | ✅ | settings.json 자동 생성 |
| 계정 전환 시 | ✅ | settings.json 자동 업데이트 |
| 프록시 중지 시 | ✅ | settings.json 삭제 (직접 API 연결 복원) |

**관련 파일**:
- `src-tauri/src/commands/mod.rs` - `init_claude_settings`, `clear_claude_settings`
- `src-tauri/src/main.rs:49-56`

---

#### 미션 3: 모든 계정 프록시 경유 ✅
| 변경 전 | 변경 후 |
|---------|---------|
| Anthropic: 직접 연결 | 모든 계정: 프록시 경유 |
| GLM: 프록시 경유 | → 통합 사용량 추적 |

**관련 파일**:
- `src-tauri/src/commands/mod.rs` - `update_claude_settings`

---

#### 미션 4: UI/UX 개선 ✅
| 항목 | 상태 | 설명 |
|------|------|------|
| 툴팁 컴포넌트 | ✅ | CSS 기반 즉시 표시 |
| 토큰 설명 | ✅ | 입력/출력 토큰 개념 설명 |
| Select 스타일 | ✅ | Input과 동일한 스타일 적용 |

**관련 파일**:
- `src/components/UsageMonitor.tsx` - Tooltip 컴포넌트
- `src/components/AccountManager.tsx:170-186`

---

#### 미션 5: 문서화 ✅
| 항목 | 상태 |
|------|------|
| 스크린샷 | ✅ 4개 (Dashboard, Accounts, Usage, Settings) |
| README.md | ✅ 전면 개편 (설치, 사용법, 작동 원리) |
| 사용자 가이드 | ✅ |

**관련 파일**:
- `docs/01-dashboard.png` ~ `04-settings.png`
- `README.md`

---

#### 미션 6: 로고 디자인 ✅
| 항목 | 설명 |
|------|------|
| 배경 | 보라색 그라데이션 (인디고 → 바이올렛) |
| 아이콘 | 양방향 화살표 (스위칭 컨셉) |
| 플랫폼 | macOS, Windows, Android 아이콘 생성 |

**관련 파일**:
- `src-tauri/icons/`

---

#### 미션 7: 배포 ✅
| 항목 | 상태 |
|------|------|
| 태그 | v0.1.0 |
| macOS DMG | ✅ Apple Silicon (aarch64) |
| GitHub Release | ✅ |

---

## 핵심 기능 요약

### 1. Provider 스위칭
```
계정 목록에서 "활성화" 클릭 → Claude Code 재시작 → 새 Provider 사용
```

### 2. 사용량 모니터링
| 탭 | 내용 |
|-----|------|
| 개요 | 요청 수, 입력/출력 토큰, 총 토큰 |
| 모델별 | claude-sonnet-4 등 모델별 사용량 |
| 일별 | 최근 7일 일별 사용량 |
| 세션별 | Claude Code 세션(대화)별 사용량 |
| 최근 로그 | 개별 API 요청 기록 |

### 3. 자동화
- 프록시 자동 시작
- `~/.claude/settings.json` 자동 관리
- macOS Keychain에서 인증 정보 자동 스캔

---

## 작동 원리

```
Claude Code
    ↓ (HTTP 요청)
SwiftCast Proxy (localhost:32080)
    ↓ (활성 계정 확인)
    ├─→ Anthropic API (OAuth 토큰 패스스루)
    └─→ GLM API (저장된 API 키 주입)
    ↓ (사용량 기록)
Claude Code
```

---

## 커밋 히스토리 (v0.1.0)

| 커밋 | 내용 |
|------|------|
| `1d30d21` | 세션별 사용량 추적 및 UI 개선 |
| `f562f76` | 문서 업데이트: 스크린샷 및 사용자 가이드 |
| `8ba604d` | 로고 디자인 변경: 스위칭 컨셉 아이콘 |

---

## 향후 계획

### v0.2.0 예정

#### 1. Windows 빌드
| 항목 | 상태 | 비고 |
|------|------|------|
| Windows x64 빌드 | 📋 예정 | Windows 환경 필요 |
| MSI 인스톨러 | 📋 예정 | |
| GitHub Actions CI | 📋 예정 | 자동 멀티플랫폼 빌드 |

#### 2. 다국어 지원 (i18n)
| 언어 | 상태 |
|------|------|
| 한국어 | ✅ 현재 기본 |
| English | 📋 예정 |
| 日本語 | 📋 예정 |
| 中文 | 📋 예정 |

**구현 방안**:
- `react-i18next` 또는 `i18next` 라이브러리 사용
- 언어 파일: `src/locales/{ko,en,ja,zh}.json`
- 시스템 언어 자동 감지 또는 설정에서 선택

#### 3. 추가 기능 (검토 중)
| 기능 | 우선순위 |
|------|----------|
| Intel Mac 빌드 | 중 |
| 시스템 트레이 | 낮음 |
| 더 많은 Provider 지원 | 낮음 |

---

## 디렉토리 구조

```
swiftcast/
├── src/                        # Frontend (React)
│   ├── components/
│   │   ├── Dashboard.tsx       # 메인 대시보드
│   │   ├── AccountManager.tsx  # 계정 관리
│   │   ├── UsageMonitor.tsx    # 사용량 모니터링
│   │   └── Settings.tsx        # 설정
│   └── App.tsx
│
├── src-tauri/                  # Backend (Rust)
│   ├── src/
│   │   ├── proxy/server.rs     # 프록시 서버
│   │   ├── storage/database.rs # SQLite DB
│   │   ├── commands/mod.rs     # Tauri commands
│   │   └── main.rs
│   ├── icons/                  # 앱 아이콘
│   └── Cargo.toml
│
├── docs/                       # 스크린샷
│   ├── 01-dashboard.png
│   ├── 02-accounts.png
│   ├── 03-usage.png
│   └── 04-settings.png
│
├── README.md                   # 사용자 가이드
├── 개발현황.md                  # 이 문서
└── 핵심_작동_원리.md
```

---

## 빠른 시작

### 설치
```bash
# macOS - DMG 다운로드
https://github.com/devload/swiftcast/releases/tag/v0.1.0
```

### 개발
```bash
# 의존성 설치
npm install

# 개발 모드
npm run tauri dev

# 빌드
npm run tauri build
```

---

## 결론

**v0.1.0 상태**: 핵심 기능 완성, macOS 배포 완료

**해결한 문제**:
- ✅ 토큰 한도 도달 시 GLM으로 즉시 전환
- ✅ 수동 설정 파일 편집 불필요
- ✅ Provider별 사용량 통합 추적

**다음 목표**: Windows 빌드, 다국어 지원
